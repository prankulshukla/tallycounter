<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tally Counter</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    color: #222;
    text-align: center;
    padding: 40px;
	display:block;
  }

  h1 {
    font-size: 42px;
    margin-bottom: 10px;
  }

  input {
    padding: 12px;
    font-size: 18px;
    width: 80%;
    max-width: 320px;
    border-radius: 8px;
    border: 1px solid #ccc;
    text-align: center;
    margin-bottom: 20px;
  }

  h2 {
    font-size: 70px;
    margin: 20px 0;
    cursor: pointer;
    user-select: none;
  }

  button {
    font-size: 32px;
    padding: 15px 45px;
    margin: 10px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background: #28a745;
    color: white;
  }

  .reset {
    background: #ff9800;
    color: black;
    font-size: 18px;
    padding: 10px 22px;
  }

  .status {
    margin-top: 20px;
    font-size: 14px;
    color: #555;
  }
  p a{
  text-decoration:none;
  font-family:sandbox;
  color:#555;
  }
</style>
</head>

<body>

<h1>Tally Counter</h1>

<input
  type="text"
  id="labelInput"
  placeholder="Enter text"
/>

<h2 id="count" onclick="add()">0</h2>

<button onclick="add()">+</button>
<br>
<button class="reset" onclick="resetCounter()">Reset</button>

<div class="status" id="status"></div>
<p class="status">Devloped By <a href="https://www.instagram.com/prankulshukla_">Prankul Shukla</p>
<script>
/* ---------- UNIQUE DEVICE ID ---------- */
let deviceId = localStorage.getItem("deviceId");
if (!deviceId) {
  deviceId = crypto.randomUUID();
  localStorage.setItem("deviceId", deviceId);
}

/* ---------- LOAD DATA ---------- */
let count = Number(localStorage.getItem("count")) || 0;
let labelText = localStorage.getItem("labelText") || "Ram Ram";

const countEl = document.getElementById("count");
const labelInput = document.getElementById("labelInput");
const statusEl = document.getElementById("status");

countEl.innerText = count;
labelInput.value = labelText;

/* ---------- SAVE LOCALLY ---------- */
function saveLocal() {
  localStorage.setItem("count", count);
  localStorage.setItem("labelText", labelInput.value);
  localStorage.setItem("synced", "false");
  updateStatus();
}

/* ---------- ADD COUNT ---------- */
function add() {
  count++;
  countEl.innerText = count;
  saveLocal();
}

/* ---------- RESET ---------- */
function resetCounter() {
  if (confirm("Reset counter?")) {
    count = 0;
    countEl.innerText = count;
    saveLocal();
  }
}

/* ---------- INPUT AUTO SAVE ---------- */
labelInput.addEventListener("input", saveLocal);

/* ---------- STATUS ---------- */
function updateStatus() {
  if (navigator.onLine) {
    statusEl.innerText = "ðŸŸ¢ Online";
  } else {
    statusEl.innerText = "ðŸ”´ Offline";
  }
}

/* ---------- AUTO SYNC (DEMO) ---------- */
window.addEventListener("online", () => {
  statusEl.innerText = "âœ… Online | Data synced";
  localStorage.setItem("synced", "true");
});
window.addEventListener("offline", updateStatus);

/* ---------- INITIAL ---------- */
updateStatus();
</script>

</body>
</html>
